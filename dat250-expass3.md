## Hand-in report DAT250 assignment 3

#### Verifying installation

![install-verification](docs/veritifaction.PNG)

#### Experiment 1

#### CRUD Operations

All CRUD operations are done on a local document database using MongoDB Compass or in the interactive shell on MongodB-docs on the following collection:

```json
[
   { item: "canvas", qty: 100, size: { h: 28, w: 35.5, uom: "cm" }, status: "A" },
   { item: "journal", qty: 25, size: { h: 14, w: 21, uom: "cm" }, status: "A" },
   { item: "mat", qty: 85, size: { h: 27.9, w: 35.5, uom: "cm" }, status: "A" },
   { item: "mousepad", qty: 25, size: { h: 19, w: 22.85, uom: "cm" }, status: "P" },
   { item: "notebook", qty: 50, size: { h: 8.5, w: 11, uom: "in" }, status: "P" },
   { item: "paper", qty: 100, size: { h: 8.5, w: 11, uom: "in" }, status: "D" },
   { item: "planner", qty: 75, size: { h: 22.85, w: 30, uom: "cm" }, status: "D" },
   { item: "postcard", qty: 45, size: { h: 10, w: 15.25, uom: "cm" }, status: "A" },
   { item: "sketchbook", qty: 80, size: { h: 14, w: 21, uom: "cm" }, status: "A" },
   { item: "sketch pad", qty: 95, size: { h: 22.85, w: 30.5, uom: "cm" }, status: "A" }
]
```

##### Insert, insertMany documents

Using ``inserMany([{...}, {...}])``Returns an object consiting of whether it was **acknowledged**, and 
an array of the **ObjectId**'s of each item in the collection generated by the operation.
![insert](docs/insertMany.PNG)

##### Filtering documents

Filter select documents where ``"status"`` is equal to ``"A"``, and ``"qty"`` is less than ``30``.

![filter](docs/filterSelect.PNG)

##### Updaing documents

Update the item ``"paper"``, set the field ``"size.uom"`` to ``"cm"``, 
set the field ``"lastModified"`` to ``$currentDate`` if it does not exist.

![update](docs/update.PNG)

##### Deleting a document

Deleting an element that matches the condition ``{status: "D"}``.
If multiple elements matches the condition, the first match is deleted.

![delete](docs/deleteOne.PNG)

#### Experiment 2

#### mapReduce()

Using **mongosh** to define a **mapFunction** and **reduceFunction**:

![functions](docs/mapAndReduceFunctions.PNG)

Performing the **mapReduce**-function, specifying the output as the collection ``map_reduce_example``:

![callingMapReduce](docs/mapReduceCall.PNG)

Looking at the resulting collection created by **mapReduce**:

![mapReduceResult](docs/map_reduce_example.PNG)

#### Defining my own mapReduce

Calculate the number of oranges ordered by each customer (denoted by **cust_id**), and store it in a collection **map_reduce_oranges**:

##### The map function

![mapOranges](docs/mapOranges.PNG)

##### The reduce function

![reduceOranges](docs/reduceOranges.PNG)

##### Calling the mapReduce function

Calling the mapReduce function and specifying the output collection:

![mapReduceCallOranges](docs/mapReduceCallOranges.PNG)

**The resulting collection:**

![mapreduce-result](docs/mapReduceOrangesResult.PNG)

The function might be useful for finding trending items.

I had no trouble or issues downloading the needed software (``monogsh``, ``Compass``, ``monogod``)